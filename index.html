<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LastWar S5 コーヒー生産計算機 (Lv60対応)</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Roboto+Mono:wght@500&display=swap" rel="stylesheet">
    <style>
        :root {
            /* S5 テーマカラー */
            --primary: #2E7D32;       /* 濃い緑 */
            --secondary: #4CAF50;     /* 明るい緑 */
            --accent: #FF7043;        /* オレンジアクセント */
            --bg-body: #F1F8E9;       /* 薄い背景緑 */
            --bg-card: #FFFFFF;
            --text-main: #333333;
            --text-sub: #666666;
            --border: #C8E6C9;
            --shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* ヘッダーエリア */
        header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start; /* 上揃えに変更 */
            margin-bottom: 20px;
            gap: 10px;
        }

        h1 {
            font-size: 1.4rem;
            color: var(--primary);
            margin: 0;
            display: flex;
            flex-direction: column;
            flex: 1; /* タイトルがスペースを埋める */
        }
        .subtitle { font-size: 0.8rem; color: var(--text-sub); font-weight: normal; }

        /* 言語切り替えボタン */
        .lang-switch {
            display: flex;
            gap: 8px; /* ボタン間隔を少し広げる */
            flex-shrink: 0; /* 縮小しない */
        }
        .lang-btn {
            background: white;
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 6px 8px; /* サイズ拡大 */
            cursor: pointer;
            opacity: 0.6;
            transition: 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .lang-btn.active { opacity: 1; border-color: var(--primary); box-shadow: 0 0 5px rgba(46,125,50,0.3); }
        .flag-icon { width: 28px; height: auto; display: block; } /* アイコンサイズ拡大 */

        /* カード共通スタイル */
        .card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        h2 {
            font-size: 1.1rem;
            margin: 0 0 15px 0;
            padding-bottom: 8px;
            border-bottom: 2px dashed var(--border);
            color: var(--primary);
        }

        /* グリッドレイアウト */
        .grid-2 { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; }
        .grid-4 { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; }

        /* 入力フォーム */
        .form-group { margin-bottom: 10px; }
        label { display: block; font-size: 0.85rem; font-weight: bold; margin-bottom: 4px; }
        
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            box-sizing: border-box;
            background: #FAFAFA;
        }
        input:focus, select:focus {
            outline: none;
            border-color: var(--secondary);
            background: #fff;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        /* 生産量表示（リアルタイム） */
        .prod-val {
            text-align: right;
            font-size: 0.8rem;
            color: var(--text-sub);
            font-family: 'Roboto Mono', monospace;
            margin-top: 2px;
            white-space: nowrap; 
        }

        /* ボタン群 */
        .btn-group { 
            display: flex; 
            gap: 10px; 
            margin-top: 20px; 
        }
        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
            color: white;
            font-size: 1rem;
            /* フレックスボックス内での縮小を許可しつつ、最低限の幅を確保 */
            min-width: 0; 
            white-space: nowrap; /* 文字折り返し防止 */
        }
        .btn-calc { background: var(--primary); }
        .btn-calc:hover { background: #1B5E20; transform: translateY(-2px); }
        
        .btn-save { background: var(--secondary); }
        .btn-save:hover { background: #388E3C; }
        
        .btn-reset { background: var(--accent); }
        .btn-reset:hover { background: #D84315; }

        /* 結果表示エリア */
        #result-area {
            background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
            border: 1px solid #A5D6A7;
            display: none; 
        }
        #result-area.show { display: block; animation: fadeIn 0.5s; }

        .result-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px dotted rgba(0,0,0,0.1);
        }
        .result-row:last-child { border-bottom: none; }
        
        .res-label { font-size: 0.9rem; }
        .res-val { font-weight: bold; font-family: 'Roboto Mono', monospace; font-size: 1.1rem; }
        
        .res-highlight { color: #D32F2F; font-size: 1.2rem; }
        
        /* 達成時刻の強調スタイル */
        .arrival-box {
            margin-top: 20px;
            background: rgba(255,255,255,0.6);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 2px solid #C2185B;
        }

        .res-time { 
            color: #C2185B; 
            font-weight: 900; 
            font-size: 2.8rem; 
            line-height: 1.1;
            display: block;
            margin: 5px 0;
            text-shadow: 2px 2px 0px rgba(255,255,255,1);
        }
        
        .res-date { 
            display: block; 
            font-size: 1.2rem; 
            color: #333; 
            font-weight: bold;
            margin-bottom: 5px;
        }

        .km-suffix {
            font-size: 0.75em;
            color: #555;
            margin-left: 4px;
            font-weight: normal;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* スマホ調整 */
        @media (max-width: 600px) {
            body { padding: 15px; }
            
            /* ヘッダー調整 */
            h1 { font-size: 1.2rem; }
            .lang-switch { gap: 6px; }
            .flag-icon { width: 32px; } /* スマホでさらに大きく */

            /* ボタンを横並びに維持 */
            .btn-group { 
                flex-direction: row; 
                gap: 8px; 
            }
            
            /* ボタンの文字サイズと余白を調整して一行に収める */
            .btn {
                padding: 12px 2px; /* 横パディングを減らす */
                font-size: 0.85rem; /* 文字サイズを少し小さく */
            }

            .grid-4 { grid-template-columns: 1fr 1fr; gap: 10px; }
            .res-time { font-size: 2.2rem; } 
            
            .prod-val {
                font-size: 1rem;
                font-weight: bold;
                color: var(--primary);
                margin-top: 4px;
            }
            
            input, select {
                font-size: 1rem;
                padding: 12px 8px;
            }
            
            .res-label { font-size: 0.95rem; }
            .res-val { font-size: 1.15rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>
            <span data-t="title">コーヒー生産計算機</span>
            <span class="subtitle">LastWar: Survival Season 5</span>
        </h1>
        <div class="lang-switch">
            <button class="lang-btn active" onclick="setLang('ja')"><img src="https://flagcdn.com/w40/jp.png" class="flag-icon"></button>
            <button class="lang-btn" onclick="setLang('en')"><img src="https://flagcdn.com/w40/us.png" class="flag-icon"></button>
        </div>
    </header>

    <div class="card">
        <h2 data-t="h_factory">生産施設設定</h2>
        <div class="grid-4" id="factory-container">
            </div>
        <hr style="border: 0; border-top: 1px dashed #ddd; margin: 15px 0;">
        <div class="form-group">
            <label data-t="weekly">週間配達</label>
            <select id="weekly-lv" onchange="updatePreview()"></select>
            <div class="prod-val" id="weekly-val">0/h</div>
        </div>
        
        <div style="background: #f1f8e9; padding: 10px; border-radius: 8px; margin-top: 10px; display: flex; justify-content: space-between; align-items: center;">
            <span style="font-weight: bold; color: var(--primary);" data-t="total_prod">総生産量:</span>
            <span style="font-weight: bold; font-size: 1.1rem;" id="total-preview">0/h</span>
        </div>
    </div>

    <div class="card">
        <h2 data-t="h_lab">研究所 & 目標</h2>
        <div class="grid-2">
            <div class="form-group">
                <label data-t="current_lab">現在研究所Lv</label>
                <select id="lab-current"></select>
            </div>
            <div class="form-group">
                <label data-t="target_lab">目標研究所Lv</label>
                <select id="lab-target"></select>
            </div>
        </div>
        <div class="grid-2">
            <div class="form-group">
                <label data-t="stock">現在の保有量</label>
                <input type="text" id="stock" value="0" placeholder="0" onblur="formatStock(this)" onfocus="unformatStock(this)">
            </div>
            <div class="form-group">
                <label data-t="reduction">消費減少率 (%)</label>
                <select id="reduction"></select>
            </div>
        </div>
        <div class="form-group">
            <label data-t="time">現在時刻</label>
            <div style="display: flex; gap: 5px;">
                <input type="time" id="now-time">
                <button onclick="setNowTime()" style="width: 50px; background:var(--secondary); color:white; border:none; border-radius:5px;">↻</button>
            </div>
        </div>
    </div>

    <div class="btn-group">
        <button class="btn btn-calc" onclick="calculate()" data-t="btn_calc">計算する</button>
        <button class="btn btn-save" onclick="saveData()" data-t="btn_save">保存</button>
        <button class="btn btn-reset" onclick="resetData()" data-t="btn_reset">リセット</button>
    </div>

    <div class="card" id="result-area">
        <h2 data-t="h_result">計算結果</h2>
        
        <div class="result-row">
            <span class="res-label" data-t="res_daily">1日あたりの生産量</span>
            <span class="res-val" id="out-daily">0</span>
        </div>

        <div class="result-row">
            <span class="res-label" data-t="res_lab_lv">研究所Lv</span>
            <span class="res-val" id="out-lab-lv">--</span>
        </div>

        <div class="result-row">
            <span class="res-label" data-t="res_virus">ウイルス耐性</span>
            <span class="res-val" id="out-virus">0 → 0</span>
        </div>
        <div class="result-row">
            <span class="res-label" data-t="res_cost">必要総コスト (割引後)</span>
            <span class="res-val" id="out-cost">0</span>
        </div>
        <div class="result-row">
            <span class="res-label" data-t="res_shortage">不足分</span>
            <span class="res-val res-highlight" id="out-shortage">0</span>
        </div>
        
        <div class="arrival-box">
            <span class="res-label" data-t="res_time" style="font-weight:bold; color:#555;">達成予想日時</span>
            <span class="res-date" id="out-date">--/--</span>
            <span class="res-time" id="out-time">--:--</span>
        </div>
    </div>
</div>

<script>
    /* ============================================
       DATA CONFIGURATION (Lv 1-60)
       ============================================ */
    const PROD_PER_LV = 720; // 生産量係数
    const MAX_LV = 60;       // 最大レベル設定

    // 研究所コスト (Lv1 - Lv31)
    const LAB_COSTS = {
        1: 700, 2: 11200, 3: 22400, 4: 44800, 5: 89600,
        6: 125400, 7: 150500, 8: 180600, 9: 216800, 10: 261000,
        11: 312100, 12: 403900, 13: 444300, 14: 488800, 15: 537600,
        16: 591400, 17: 650500, 18: 715600, 19: 787200, 20: 865900,
        21: 874500, 22: 883300, 23: 892100, 24: 901000, 25: 910000,
        26: 919100, 27: 928300, 28: 937600, 29: 947000, 30: 956500,
        31: 966000, 32: 975700, 33: 985500, 34: 995300, 35: 1005300,
        36: 1015300, 37: 0, 38: 0, 39: 0, 40: 0, 
        41: 0, 42: 0, 43: 0, 44: 0, 45: 0,
        46: 0, 47: 0, 48: 0, 49: 0, 50: 0,
        51: 0, 52: 0, 53: 0, 54: 0, 55: 0,
        56: 0, 57: 0, 58: 0, 59: 0, 60: 0
    };

    // ウイルス耐性 (Lv1 - Lv31)
    const VIRUS_RES = {
        0: 0, 1: 100, 2: 200, 3: 300, 4: 400, 5: 500,
        6: 750, 7: 1000, 8: 1250, 9: 1500, 10: 1750,
        11: 2000, 12: 2250, 13: 2500, 14: 2750, 15: 3000,
        16: 3250, 17: 3500, 18: 3750, 19: 4000, 20: 4250,
        21: 4500, 22: 4750, 23: 5000, 24: 5250, 25: 5500,
        26: 5750, 27: 6000, 28: 6250, 29: 6500, 30: 6750,
        31: 7000, 32: 7250, 33: 7500, 34: 7750, 35: 8000,
        36: 8250, 37: 8500, 38: 8750, 39: 9000, 40: 9250,
        41: 9500, 42: 9750, 43: 10000, 44: 10250, 45: 10500,
        46: 11000, 47: 11500, 48: 12000, 49: 12500
    };

    // Lv33以降 Lv60までは自動的に0で埋める
    for (let i = 61; i <= MAX_LV; i++) {
        LAB_COSTS[i] = 0;
        VIRUS_RES[i] = 0;
    }

    // 翻訳データ
    const LANG = {
        ja: {
            title: "コーヒー生産計算機",
            h_factory: "生産施設設定",
            weekly: "週間配達",
            total_prod: "総生産量:",
            h_lab: "研究所 & 目標",
            current_lab: "現在研究所Lv",
            target_lab: "目標研究所Lv",
            stock: "現在の保有量",
            reduction: "消費減少率 (%)",
            time: "現在時刻",
            btn_calc: "計算する",
            btn_save: "保存",
            btn_reset: "リセット",
            h_result: "計算結果",
            res_lab_lv: "研究所Lv",
            res_daily: "1日あたりの生産量",
            res_virus: "ウイルス耐性",
            res_cost: "必要総コスト",
            res_shortage: "不足分",
            res_time: "達成予想日時",
            factory_prefix: "工場",
            not_built: "未建造",
            msg_saved: "保存しました",
            msg_reset: "リセットしました"
        },
        en: {
            title: "Coffee Production Calc",
            h_factory: "Factory Settings",
            weekly: "Weekly Delivery",
            total_prod: "Total Production:",
            h_lab: "Lab & Target",
            current_lab: "Current Lab Lv",
            target_lab: "Target Lab Lv",
            stock: "Current Stock",
            reduction: "Resource Reduction (%)",
            time: "Current Time",
            btn_calc: "Calculate",
            btn_save: "Save",
            btn_reset: "Reset",
            h_result: "Result",
            res_lab_lv: "Lab Level",
            res_daily: "Daily Production",
            res_virus: "Virus Resistance",
            res_cost: "Total Cost",
            res_shortage: "Shortage",
            res_time: "Est. Completion",
            factory_prefix: "Factory",
            not_built: "Not Built",
            msg_saved: "Saved!",
            msg_reset: "Reset!"
        }
    };

    let curLang = 'ja';

    /* ============================================
       LOGIC & UI
       ============================================ */
    
    window.onload = () => {
        initUI();
        loadData();
        setNowTime();
    };

    function initUI() {
        const container = document.getElementById('factory-container');
        for (let i = 1; i <= 4; i++) {
            const div = document.createElement('div');
            div.className = 'form-group';
            div.innerHTML = `
                <label><span data-t="factory_prefix">工房</span> ${convertToRoman(i)}</label>
                <select id="ws${i}-lv" onchange="updatePreview()"></select>
                <div class="prod-val" id="ws${i}-val">0/h</div>
            `;
            container.appendChild(div);
            populateSelect(`ws${i}-lv`, 0, 35); 
        }
        populateSelect('weekly-lv', 0, 35);
        populateSelect('lab-current', 0, MAX_LV);
        populateSelect('lab-target', 1, MAX_LV);

        const redSel = document.getElementById('reduction');
        for (let i = 0; i <= 15; i+=0.5) {
            redSel.add(new Option(i.toFixed(1) + '%', i));
        }

        setLang(localStorage.getItem('s5_lang') || 'ja');
    }

    // --- K/M入力対応ロジック ---
    function parseStock(val) {
        if (!val) return 0;
        let str = String(val).toLowerCase().replace(/,/g, '').trim();
        let multi = 1;
        
        if (str.endsWith('k')) {
            multi = 1000;
            str = str.slice(0, -1);
        } else if (str.endsWith('m')) {
            multi = 1000000;
            str = str.slice(0, -1);
        }
        
        const num = parseFloat(str);
        return isNaN(num) ? 0 : Math.floor(num * multi);
    }

    function formatStock(input) {
        const num = parseStock(input.value);
        input.value = num.toLocaleString();
    }

    function unformatStock(input) {
        const val = parseStock(input.value);
        if (val === 0) {
            input.value = '';
        } else {
            input.value = val;
        }
    }

    function formatKM(num) {
        if (num >= 1000000) {
            const mVal = (num / 1000000).toFixed(2).replace(/\.00$/, '');
            return `<span class="km-suffix">(${mVal}M)</span>`;
        }
        if (num >= 1000) {
            const kVal = (num / 1000).toFixed(1).replace(/\.0$/, '');
            return `<span class="km-suffix">(${kVal}K)</span>`;
        }
        return '';
    }

    function calculate() {
        let totalH = 0;
        for (let i = 1; i <= 4; i++) {
            const lv = parseInt(document.getElementById(`ws${i}-lv`).value) || 0;
            totalH += lv * PROD_PER_LV;
        }
        const wLv = parseInt(document.getElementById(`weekly-lv`).value) || 0;
        totalH += wLv * PROD_PER_LV;

        if (totalH === 0) {
            alert("生産量が0です。施設レベルを設定してください。");
            return;
        }

        const curLab = parseInt(document.getElementById('lab-current').value);
        const tgtLab = parseInt(document.getElementById('lab-target').value);
        
        if (curLab >= tgtLab) {
            alert("目標Lvは現在Lvより大きくしてください。");
            return;
        }

        let rawCost = 0;
        for (let i = curLab + 1; i <= tgtLab; i++) {
            if (LAB_COSTS[i] !== undefined) rawCost += LAB_COSTS[i];
        }

        const rate = parseFloat(document.getElementById('reduction').value) || 0;
        const realCost = Math.ceil(rawCost * (1 - rate/100));
        const stock = parseStock(document.getElementById('stock').value);
        
        const shortage = Math.max(0, realCost - stock);

        const timeElem = document.getElementById('out-time');
        const dateElem = document.getElementById('out-date');
        
        if (shortage <= 0) {
            timeElem.innerText = "達成済み";
            timeElem.style.color = "green";
            dateElem.innerText = "";
        } else {
            const hoursNeeded = shortage / totalH;
            const nowVal = document.getElementById('now-time').value;
            const now = new Date();
            if (nowVal) {
                const [h, m] = nowVal.split(':');
                now.setHours(h, m);
            }
            now.setMinutes(now.getMinutes() + (hoursNeeded * 60));

            dateElem.innerText = `${now.getMonth()+1}月${now.getDate()}日`;
            timeElem.innerText = `${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}`;
            timeElem.style.color = "#C2185B";
        }

        // --- 結果表示の更新 ---
        
        // 研究所Lv表示
        const curLabText = curLab === 0 ? LANG[curLang].not_built : `Lv.${curLab}`;
        const tgtLabText = `Lv.${tgtLab}`;
        document.getElementById('out-lab-lv').innerText = `${curLabText} → ${tgtLabText}`;

        document.getElementById('out-daily').innerHTML = fmt(totalH * 24) + formatKM(totalH * 24);
        
        const virusFrom = VIRUS_RES[curLab] !== undefined ? fmt(VIRUS_RES[curLab]) : '??';
        const virusTo = VIRUS_RES[tgtLab] !== undefined ? fmt(VIRUS_RES[tgtLab]) : '??';
        document.getElementById('out-virus').innerText = `${virusFrom} → ${virusTo}`;
        
        document.getElementById('out-cost').innerHTML = fmt(realCost) + formatKM(realCost);
        document.getElementById('out-shortage').innerHTML = fmt(shortage) + formatKM(shortage);

        document.getElementById('result-area').classList.add('show');
        document.getElementById('result-area').scrollIntoView({behavior:'smooth'});
    }

    function updatePreview() {
        let total = 0;
        for(let i=1; i<=4; i++) {
            const lv = parseInt(document.getElementById(`ws${i}-lv`).value)||0;
            const val = lv * PROD_PER_LV;
            document.getElementById(`ws${i}-val`).innerHTML = fmt(val) + formatKM(val) + '/h';
            total += val;
        }
        const wLv = parseInt(document.getElementById('weekly-lv').value)||0;
        const wVal = wLv * PROD_PER_LV;
        document.getElementById('weekly-val').innerHTML = fmt(wVal) + formatKM(wVal) + '/h';
        total += wVal;

        document.getElementById('total-preview').innerHTML = fmt(total) + formatKM(total) + '/h';
    }

    function populateSelect(id, min, max) {
        const sel = document.getElementById(id);
        sel.innerHTML = ''; 
        
        const notBuiltText = LANG[curLang].not_built;
        sel.add(new Option(notBuiltText, 0));
        
        for(let i=Math.max(1, min); i<=max; i++) {
            sel.add(new Option(`Lv.${i}`, i));
        }
    }

    function setNowTime() {
        const d = new Date();
        document.getElementById('now-time').value = 
            ('0'+d.getHours()).slice(-2) + ':' + ('0'+d.getMinutes()).slice(-2);
    }

    function fmt(num) { return num.toLocaleString(); }

    function convertToRoman(num) {
        const roman = {1:'Ⅰ', 2:'Ⅱ', 3:'Ⅲ', 4:'Ⅳ'};
        return roman[num] || num;
    }

    function saveData() {
        const data = {
            ws: [],
            weekly: document.getElementById('weekly-lv').value,
            labC: document.getElementById('lab-current').value,
            labT: document.getElementById('lab-target').value,
            stock: document.getElementById('stock').value,
            red: document.getElementById('reduction').value
        };
        for(let i=1; i<=4; i++) data.ws.push(document.getElementById(`ws${i}-lv`).value);
        
        localStorage.setItem('s5_calc_data_v9', JSON.stringify(data));
        alert(LANG[curLang].msg_saved);
    }

    function loadData() {
        const raw = localStorage.getItem('s5_calc_data_v9');
        if(raw) {
            const data = JSON.parse(raw);
            if(data.ws) {
                data.ws.forEach((lv, idx) => document.getElementById(`ws${idx+1}-lv`).value = lv);
            }
            if(data.weekly) document.getElementById('weekly-lv').value = data.weekly;
            if(data.labC) document.getElementById('lab-current').value = data.labC;
            if(data.labT) document.getElementById('lab-target').value = data.labT;
            if(data.stock) {
                const input = document.getElementById('stock');
                input.value = data.stock;
                formatStock(input); 
            }
            if(data.red) document.getElementById('reduction').value = data.red;
            updatePreview();
        }
    }

    function resetData() {
        if(confirm("リセットしますか？")) {
            localStorage.removeItem('s5_calc_data_v9');
            location.reload();
        }
    }

    function setLang(lang) {
        curLang = lang;
        localStorage.setItem('s5_lang', lang);
        
        document.querySelectorAll('[data-t]').forEach(el => {
            const key = el.getAttribute('data-t');
            if(LANG[lang][key]) el.innerText = LANG[lang][key];
        });

        const currentVals = {};
        document.querySelectorAll('select').forEach(s => currentVals[s.id] = s.value);
        
        populateSelect('weekly-lv', 0, 35);
        populateSelect('lab-current', 0, MAX_LV);
        populateSelect('lab-target', 1, MAX_LV);
        for(let i=1; i<=4; i++) populateSelect(`ws${i}-lv`, 0, 35);
        
        Object.keys(currentVals).forEach(id => {
            const el = document.getElementById(id);
            if(el) el.value = currentVals[id];
        });

        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        document.querySelector(`.lang-btn[onclick="setLang('${lang}')"]`).classList.add('active');
    }
</script>
</body>
</html>



